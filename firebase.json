{
  // Cấu hình Firestore
  "firestore": {
    // Tên database, (default) là lựa chọn chuẩn
    "database": "(default)",
    // Vị trí server, bạn đã chọn asia-southeast1 để khớp với Cloud Function
    "location": "asia-southeast1",
    // File quy tắc bảo mật
    "rules": "firestore.rules",
    // File chỉ mục (indexes)
    "indexes": "firestore.indexes.json"
  },

  // Cấu hình Cloud Functions (Backend)
  "functions": [
    {
      // Thư mục chứa code functions
      "source": "functions",
      "codebase": "default",
      // Runtime Node.js, dựa trên file functions-package.json
      "runtime": "nodejs20",
      // Các file bỏ qua khi deploy
      "ignore": [
        "node_modules",
        ".git",
        "firebase-debug.log",
        "firebase-debug.*.log",
        "*.local"
      ],
      // Các lệnh chạy trước khi deploy (build code TypeScript)
      "predeploy": [
        "npm --prefix \"$RESOURCE_DIR\" run lint",
        "npm --prefix \"$RESOURCE_DIR\" run build"
      ]
    }
  ],

  // Cấu hình Hosting (Frontend)
  "hosting": {
    // Thư mục chứa code web tĩnh, "out" là output của "next export"
    "public": "out",
    "ignore": [
      "firebase.json",
      "**/.*",
      "**/node_modules/**"
    ],
    // Rất quan trọng: Chuyển hướng tất cả các route về index.html
    // để Next.js (static export) có thể xử lý các trang động như /jobs/job-id
    "rewrites": [
      {
        "source": "**",
        "destination": "/index.html"
      }
    ]
  },

  // Cấu hình Storage (Lưu trữ file, CV)
  "storage": {
    // File quy tắc bảo mật cho Storage
    "rules": "storage.rules"
  },

  // Cấu hình Emulators (Môi trường giả lập local)
  "emulators": {
    // Giả lập Cloud Functions
    "functions": {
      "port": 5001
    },
    // Giả lập Firestore
    "firestore": {
      "port": 8080
    },
    // Giả lập Hosting
    "hosting": {
      "port": 5000
    },
    // Giả lập Storage
    "storage": {
      "port": 9199
    },
    // Bật giao diện người dùng (UI) cho Emulators
    "ui": {
      "enabled": true,
      "port": 4000
    },
    // Chạy tất cả emulators trong một project duy nhất
    "singleProjectMode": true
  }
}